CREATE TABLE IF NOT EXISTS Genre(
Id_genre INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
Categorie VARCHAR(25) NOT NULL
);

CREATE TABLE IF NOT EXISTS Editeur(
Id_editeur INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
Nom_editeur VARCHAR(25) NOT NULL,
Pays_editeur VARCHAR (25),
Adresse_editeur VARCHAR (25)
);

CREATE TABLE IF NOT EXISTS Auteur(
Id_auteur INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
Nom_auteur VARCHAR(25) NOT NULL,
Prenom_auteur VARCHAR(25) NOT NULL,
Pays_auteur VARCHAR(25)
);

CREATE TABLE IF NOT EXISTS Emprunteur(
Id_emprunteur INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
Nom_emprunteur VARCHAR(25) NOT NULL,
prenom_emprunteur VARCHAR(25) NOT NULL,
Nombre_livre_emprunte INTEGER CHECK (Nombre_livre_emprunte <= 3)
);

CREATE TABLE IF NOT EXISTS Livre(
Id_livre INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
Titre VARCHAR(25) NOT NULL,
Prix INTEGER NOT NULL,
Id_genre INTEGER NOT NULL,
Id_editeur INTEGER NOT NULL,
FOREIGN KEY(Id_genre) REFERENCES Genre (Id_genre)
ON DELETE CASCADE
ON UPDATE CASCADE,
FOREIGN KEY(Id_editeur) REFERENCES Editeur (Id_editeur)
ON DELETE CASCADE
ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS Ecrit_par(
Id_livre INTEGER NOT NULL,
Id_auteur INTEGER NOT NULL,
PRIMARY KEY (Id_livre, Id_auteur)
FOREIGN KEY (Id_livre) REFERENCES Livre (Id_livre)
ON DELETE CASCADE
ON UPDATE CASCADE,
FOREIGN KEY(Id_auteur) REFERENCES Auteur (Id_auteur)
ON DELETE CASCADE
ON UPDATE CASCADE
);

CREATE TABLE IF NOT EXISTS Emprunter_par(
Id_livre INTEGER NOT NULL,
Id_emprunteur INTEGER NOT NULL,
Emprunt_date_debut date NOT NULL,
Statut INTEGER,
PRIMARY KEY (Id_livre, Id_emprunteur),
FOREIGN KEY (Id_livre) REFERENCES Livre (Id_livre)
ON DELETE CASCADE
ON UPDATE CASCADE,
FOREIGN KEY (Id_emprunteur) REFERENCES Emprunteur (Id_emprunteur)
ON DELETE CASCADE
ON UPDATE CASCADE
);